<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PyWebServ: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PyWebServ
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PyWebServ Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The simplest web server. This directory is at the root of the web server.</p>
<p>The sub directories listed below contain the following functionality: </p><pre class="fragment">   common              the code for the server
   data                for database related
   content             where the content files live
       siteicons       icons for this site
       media           images, media
       static          files that may be presented as is
       proj-*          python and html / css files that make up the site
           index.py    included by default
           macros.py   macros included in project
           common.py   common to this project
</pre><p> &#160;To create a <b>new web project</b>, add a new directory that starts with "proj" (like "proj-index") and populate the files. At least one python file is needed, must be named 'index.py'</p>
<p>&#160;To create a <b>new web page</b>, add a new python file, and call the URL registration function(s) within. The server redirects the url to the function you specify. </p><pre class="fragment">        add_one_url("/index.html",  got_index,            "index.html")
        add_one_url("/",            got_index,            "index.html")
                     ^__URL         ^__function to call   ^__template to use
</pre><p> To create a new 'macro' use the add macro function with the macro name and the name of the function that is executed by the macro. The macro will be replaced by the return value of the function. The macro is created by surrounding braces with a space. Like: { mymacro } The macro regex is '{ .*? }' [the '?' is for non greedy wild card)</p>
<p>add_one_func("mymacro", my_macro_func)</p>
<p>Macro 'auto' files:</p>
<p>The variables in the files start with "_mac_" will become local macros, that can be referenced on this page. Variables start with "_glob_" will become global that can be referenced on the whole site. See: ./contents/Proj-xxx/macros.py The variables start with "_func_" will become local functions</p>
<p>The project files are imported under a try: except clause, so ordinarily, a mistake (like syntax error) can down the site, only the particular page / project.</p>
<p>However, some conditions (like missing site dependencies) CAN down the site.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
The built in macros:   (see source for complete list)</h1>
<h3><a class="anchor" id="autotoc_md14"></a>
{ image nnn [ www ] [ hhh ] }</h3>
<p>Put an image html tag nnn in the output. The optional arguments create the following: </p><pre class="fragment">    image nnn www
</pre><p> Put an image tag in the output, resize width to requested. Preserve the image's aspect ratio. </p><pre class="fragment">    image nnn www hhh
</pre><p> Put an image tag in the output, re-size to width / height. The re-sized image is cached and presented on the next call.</p>
<p>The images are searched for in local / global / static ... directories;</p>
<h3><a class="anchor" id="autotoc_md15"></a>
{ include fname }</h3>
<p>&ndash; Include a file. Read and present file verbatim. Will search for a file in local / global / static / css directories. Most useful for common project headers / footers.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Commenting out macros:</h2>
<p>Normally a macro is delimited by { macro }, so changing the delimiter will make it a non macro. In the examples we use underscore like this: {_macro } The parser will print the string as normal, so to hide it from the browser we add the html comments around it. Like:</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Space in macros arguments:</h2>
<p>The macro arguments are parsed by assuming the space character as the delimiter. The work around is to use the HTML &#160; space symbol. Like: Hello&#160;World</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Unrecognized macros:</h2>
<p>The macros that are not recognized are printed verbatim into the HTML stream. This is to signal the developer that the macro is not valid. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
