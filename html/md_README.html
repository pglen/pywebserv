<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PyWebServ: pywebserv Wsgi Web Server</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PyWebServ
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">pywebserv Wsgi Web Server </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md5"></a>
WSGI compliant web server</h1>
<p>Web server with no dependencies (for security). One might say this is a framework-less framework.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Introduction</h2>
<p>This is a web server framework. To wet your apetite, here is how simple the HTML web page becomes. Below, is the source for the example pages. The macros can be crafted by you, so the simplicity is by no means a limitation. (Helps to know html/python) </p><pre class="fragment">    { sitestyle }
    { header }

    &lt;table width=100%  cellspacing=2 cellpadding=0 border=0&gt;
        &lt;tr&gt;&lt;td bgcolor=#eeeeee width=15% valign=top&gt;
            { left }
            { center }
            { nav }
            { right }
    &lt;/table&gt;
    &lt;table width=100% { sitecolor }&gt;
        { footer }
    &lt;/table&gt;
</pre><p> What works:</p>
<ul>
<li>First page delivered</li>
<li>Dynamic page gen.</li>
<li>Template expansion { vars } are substituted recursively</li>
<li>Connected to apache2 (tests OK)</li>
<li>Image re-size from { vars } arguments ex: { image any.png 800 }</li>
<li>First test site (see below)</li>
<li>Apache binding tested via the WSGI interface</li>
<li>Working out the details</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
Development</h2>
<p>Assuming Linux / Firefox setup; start the <a class="el" href="wsgi__server_8py.html">wsgi_server.py</a> in a terminal. This will start a web server, and serve the site on port 8000. Connect firefox to localhost:8000. Edit away; When a file is modified, the '<a class="el" href="namespacewsgi__server.html">wsgi_server</a>' utility will refresh the firefox page. Instant feedback without the load / refresh cycle. Natually, other setups can be adjusted for, see source for details.</p>
<p>On the screen shot below, images are added, images are dynamically re sized with the PIL library;</p>
<p><img src="content/siteicons/next_step.png" alt="screen shot of image processing" class="inline"/></p>
<p>Projects are added in a separate sub directory; The projects are isolated, errors in the project do not influence (down) the site; only the page with the error, and (only) an error message shows.</p>
<p><img src="content/siteicons/tiles.png" alt="screen shot of project and tiles processing" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md8"></a>
Driving the macros:</h3>
<pre class="fragment">  Variable subst regex: "{ .*? }"  (example: { header } )
  Command parameter subst regex: "[ .*? ]"  (example: [ value_one ] )

  See index.html for examples.
</pre> <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Directories   </th><th class="markdownTableHeadNone">Usage    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/content/proj*   </td><td class="markdownTableBodyNone">applications / projects    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">/content/siteicons/   </td><td class="markdownTableBodyNone">icons    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/content/media/   </td><td class="markdownTableBodyNone">image content    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">/content/css/   </td><td class="markdownTableBodyNone">global css files    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">/content/common/   </td><td class="markdownTableBodyNone">python scripts (wsgi interface)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">/content/static/   </td><td class="markdownTableBodyNone">static (non changing) content   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md9"></a>
Flow of presenting the pages:</h2>
<pre class="fragment">url lookup in main -&gt;
    if entry present
        if html file exists:
            expand macro -&gt; present page
        else
            call function in url table
            function fills in everything -&gt; present it
    else
        if static file -&gt;
            present it
        else
            if 404 or error file
                present it
            else
                404 error message
</pre><p> To create a new project:</p>
<p>Add a directory to the web server's "./content/" directory that starts with 'proj' (like proj-hello or proj-sales) fill in the directory with content o Initial .py file to configure the project (index.py) o Content that responds to the callbacks, or .. ... content presented as is</p>
<p>See proj-index for an example home page. Also proj* for more detailed examples. Please note how simple a calendar implementation becomes.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
History:</h2>
<pre class="fragment">Fri 16.Apr.2021 Skeleton project
Sun 18.Apr.2021 Apache tests OK
Mon 19.Apr.2021 Turned icons/ to siteicons/ (for apache not to redirect)
Thu 22.Apr.2021 Projects in separate dir, reverse isolation
Mon 27.Sep.2021 Moved user contents to the subdir 'content' (more isolation)
Tue 28.Sep.2021 Cleanup, first useful site
Sun 20.Mar.2022 First live site on the web
Sat 26.Mar.2022 World peace pages
Tue 28.Jun.2022 Created unitedplanetpeace.com proto site
Sat 16.Jul.2022 Site dev continues
Sun 13.Aug.2022 Restructured main OBJ creation
Sun 13.Nov.2022 Added dynamic / responsive page feature

Also see 'git log' for more
</pre> <h1><a class="anchor" id="autotoc_md11"></a>
Apache config (example on port 7777)</h1>
<pre class="fragment">Listen 7777

&lt;VirtualHost *:7777&gt;
  ServerName localhost
  LogLevel error
  WSGIScriptAlias / /home/myhome/pgpygtk/webserver/wsgi_main.py
  DocumentRoot /home/myhome/pgpygtk/webserver
&lt;Directory /home/myhome/pgpygtk/webserver&gt;
  SetHandler wsgi-script
  Options ExecCGI
  Require all granted
    &lt;Files wsgi_main.py&gt;
      Require all granted
    &lt;/Files&gt;
&lt;/Directory&gt;
&lt;/VirtualHost&gt;
</pre> <h1><a class="anchor" id="autotoc_md12"></a>
License</h1>
<p>Open source.</p>
<p>PG </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
