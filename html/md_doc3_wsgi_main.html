<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PyWebServ: Module wsgi_main</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PyWebServ
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Module <a class="el" href="namespacewsgi__main.html">wsgi_main</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The simplest web server. This directory is at the root of the web server, and sub directories may assume the following functions: </p><pre class="fragment">data            for database related
content         where the files live
    siteicons       icons for this site
    media           images, media
    static          files that may be presented as is
    proj*           python and html / css files that make up the site
</pre><p> To create a <b>new project</b>, add a new directory that starts with "proj" (like "proj-000") and populate the files. At least one python file is needed.</p>
<p>To create a <b>new page</b>, add a new python file, and call the URL registration function(s) within. The server redirects the url to the function you specify.</p>
<p>add_one_url("/", got_index, "index.html")</p>
<p>To create a new 'macro' use the add macro function with the macro name and the name of the function that is executed by the macro. The macro will be replaced by the return value of the function. The macro is created by surrounding braces with a space. Like: { mymacro } The macro regex is '{ .*? }' [the '?' is for non greedy wild card)</p>
<p>add_one_func("mymacro", my_img_func)</p>
<p>Builtin macros:</p>
<p>{ image nnn } &ndash; Put an image tag nnn in the output { image nnn www } &ndash; Put an image tag in the output, resize width to requested { image nnn www hhh } &ndash; Put an image tag in the output, resize to width / height</p>
<p>The first two forms of the { image } function will preserve the image's aspect ratio.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Functions</h1>
<p><code>application(environ, respond)</code> : WSGI main entry point. The web server (like apache) will call this.</p>
<p><code>tracex(xstr)</code> : Trace current fault. This was crafted, so the apache run time can access it without any includes.</p>
<p><code><a class="el" href="namespacewsgi__main.html#ac700c16970a4fe41bfefb70f0444216e">xhelp()</a></code> : <br  />
</p>
<p><code><a class="el" href="namespacewsgi__main.html#a575120d1726ea720b5b84b24e9721310">xversion()</a></code> : <br  />
</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Classes</h1>
<p><code>Myconf()</code> : Simplified config for propagating command line to runtime</p>
<p><code>comline()</code> : Command line action defines </p><pre class="fragment">### Class variables

`CLEAR_CONFIG`
:

`SHOW_CONFIG`
:

`SHOW_TIMING`
:

`USE_STDOUT`
:
</pre><p> <code>xWebServer(environ, respond)</code> : This class has all the info we would need for page generation. Add urls and functions to complete the reply. The return value of the process_request function is the output to the client.</p>
<p>Decorate the class instance with data from the environment</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Methods</h2>
<p><code>parse_instance(self, environ, respond)</code> :</p>
<p><code>process_request(self, request, respond)</code> : This executes the request, after the main initializer parsed everything </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
